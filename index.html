<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>井字棋博弈树构建 - 探究活动</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="header">
      <h1>活动2 博弈树构建</h1>
    </div>

    <div class="container">
      <!-- 左侧棋盘库部分 -->
      <div class="palette-section">
        <h2 class="section-title">棋盘库</h2>
        <div class="palette" id="nodePalette">
          <!-- 棋盘C -->
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">C</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell"></div>
                <div class="cell">X</div>
                <div class="cell"></div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <!-- 棋盘D -->
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">D</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <!-- 棋盘B -->
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">B</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">E</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell"></div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">F</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell"></div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">G</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell"></div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">K</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">H</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell"></div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">I</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
          <div class="palette-item">
            <div class="draggable-node" draggable="true">
              <div class="node-label">J</div>
              <div class="ttt-board">
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
                <div class="cell">X</div>
                <div class="cell">O</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 右侧构建区部分 -->
      <div class="workspace-section">
        <div class="section-header">
          <h2 class="section-title">博弈树构建区</h2>
          <div class="controls">
            <button onclick="validateGameTree()">验证博弈树</button>
          </div>
        </div>
        <div class="workspace" id="workspace">
          <div class="workspace-placeholder">
            将棋盘从左侧拖拽到这里开始构建博弈树...
          </div>
          <svg id="arrow-svg">
            <defs>
              <marker
                id="arrowhead"
                markerWidth="10"
                markerHeight="7"
                refX="10"
                refY="3.5"
                orient="auto"
                markerUnits="strokeWidth"
              >
                <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
              </marker>
            </defs>
          </svg>
        </div>
        <div class="status" id="statusMessage">
          就绪。拖拽节点移动，点击连接点绘制箭头！
        </div>
      </div>
    </div>

    <!-- 策略探究问题区域 -->
    <!-- <div class="questions-section">
      <div class="questions-container">
        <h2 class="questions-title">🎯 构建完成博弈树后，思考以下问题</h2>

        <div class="question-group">
		  <h4>胜负可能性分析</h4>
		  <div class="question-item">从初始棋盘<span class="board-reference">A</span>开始：</div>
		  <div class="question-item">（1）先手(O)能够获胜的结果有 <input type="text" class="fill-in-blank-input" maxlength="2"> 种？</div>
		  <div class="question-item">（2）后手(X)能够获胜的结果有 <input type="text" class="fill-in-blank-input" maxlength="2"> 种？</div>
		  <div class="question-item">（3）平局的结果有 <input type="text" class="fill-in-blank-input" maxlength="2"> 种？</div>
		</div>

        <div class="question-group">
          <h4>最优策略推演</h4>
		  <div class="question-item">从初始棋盘<span class="board-reference">A</span>开始：</div>
          <div class="question-item">（1） 如果先手(O)足够聪明，总能选择最佳走法，最终会是什么结局？ <input type="text" class="fill-in-blank-input" maxlength="2"> </div>
          <div class="question-item">（2） 如果后手(X)也足够聪明，总能最优应对，结局会改变吗？ <input type="text" class="fill-in-blank-input" maxlength="2"> </div>
          <div class="question-item">（3） 如果从棋盘<span class="board-reference">C</span>开始，最优策略下的结局是什么？ <input type="text" class="fill-in-blank-input" maxlength="2"> </div>
          <div class="question-item">（4） 如果从棋盘<span class="board-reference">D</span>开始，结果又会如何？ <input type="text" class="fill-in-blank-input" maxlength="2"> </div>
        </div>

        <div class="question-group">
          <h4>AI设计思考</h4>
          <div class="question-item">
            请根据以上问题思考，如果让你设计一个AI来下棋，它会如何"思考"并选择下一步？
          </div>

          <span class="answer-label">你的AI设计方案：</span>
          <textarea
            class="answer-box"
            placeholder="请在此描述你设计的AI思考过程和决策逻辑..."
          ></textarea>

          <div class="thinking-hint">
            提示：结合你在构建博弈树过程中的体验，想象AI的思考过程
          </div>
        </div>
      </div>
    </div> -->

    <script src="script.js"></script>
    <!-- 验证结果模态框 -->
    <div id="validationModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-title">博弈树验证结果</div>
          <button class="modal-close" onclick="closeValidationModal()">&times;</button>
        </div>
        <div id="validationResult"></div>
      </div>
    </div>

  </body>
</html>
